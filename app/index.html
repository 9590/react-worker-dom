<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Normal Example - ReactJS App Performance</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <style>
    .Query {
        position: relative;
    }
    
    .Query:hover .popover {
        left: -100%;
        width: 100%;
        display: block;
    }
    
    #content > div {
        overflow: hidden;
        float: left;
    }
    </style>
</head>

<body>
    <div id="content"></div>
    <script type="text/javascript">
    var count = parseInt(document.location.hash.substring(1));
    isNaN(count) && (count = 1);

    // Placing the container where this is rendered
    var containers = [];
    var content = document.getElementById('content');
    for (var i = 0; i < count; i++) {
        var container = document.createElement('div');
        container.style.width = 100 / count + '%';
        content.appendChild(container);

        containers.push(container);
    }

    if (/worker/.test(window.location.search)) {
        // If this is an example showing a worker, identified by a ?worker in the URL
        document.title = 'WebWorkers Example - ReactJS App Performance';

        // This file is to recieve DOM commands from ReactJS running in worker
        addScriptTag('react-worker-dom.js', function() {
            containers.forEach(function(container) {
                var worker = new Worker('main.js')
                ReactWorkerDom.init(worker, container);
                worker.postMessage({});
            });
        });
    } else {
        // In case of a simple ReactJS Example
        addScriptTag('main.js', function() {
            containers.forEach(function(container) {
                // Just a convoluted way to call a method to start rendering.
                // This is done so that main.jsx has a single method to call for rendering
                onmessage({
                    data: container
                });
            });
        });
    }

    // Just a function to add a script tag
    function addScriptTag(scriptSrc, cb) {
        var x = document.createElement('script');
        x.src = scriptSrc;
        x.onload = function() {
            cb();
            window.__appReady = true;
        }
        document.body.appendChild(x);
    }
    </script>
</body>

</html>
